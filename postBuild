mkdir $HOME/.jupyter
echo "c.NotebookApp.iopub_data_rate_limit=1e22" >> $HOME/.jupyter/jupyter_notebook_config.py
jupyter nbextension install --py --sys-prefix itkwidgets
jupyter nbextension enable --py --sys-prefix itkwidgets
cd /tmp/
jupyter labextension install @jupyter-widgets/jupyterlab-manager --no-build
jupyter labextension install jupyter-matplotlib jupyterlab-datawidgets jupyter-webrtc itkwidgets --no-build
jupyter labextension install jupyterlab-dash --no-build
jupyter lab build --minimize=False  # minimize uses too much memory

funcdir="notebooks/multiscale/function/data"
mkdir -p ${funcdir}
gdown --id 1S2qE6-oNP_KMvkobRxswkH0DqCJDbPnu -O ${funcdir}/calcium_trace.tgz \
&& pushd ${funcdir} \
&& tar -xzf calcium_trace.tgz \
&& popd
gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O ${funcdir}/smoothed_skeletons_v185.tgz \
&& pushd ${funcdir} \
&& tar -xzf smoothed_skeletons_v185.tgz \
&& popd

mitodir="notebooks/multiscale/mitochondria/data"
mkdir -p ${mitodir}
gdown --id 1OIUpHr9gVYKVagDqpom9Sx9qb5iAX5Km -O ${mitodir}/multiscale_mito_intermediate_data.tgz \
&& pushd ${mitodir} \
&& tar -xzf multiscale_mito_intermediate_data.tgz \
&& popd
mkdir -p ${mitodir}/neuronmeshes
https://drive.google.com/file/d//view?usp=sharing
gdown --id 1lPWicWMBsIiXur68Sqf_FMS5ZzHoSqLj -O ${mitodir}/neuronmeshes/neuron_meshes_v185.tgz \
&& pushd ${mitodir}/neuronmeshes \
&& tar -xzf neuron_meshes_v185.tgz \
&& popd
gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O ${mitodir}/smoothed_skeletons_v185.tgz \
&& pushd data/ \
&& tar -xzf smoothed_skeletons_v185.tgz \
&& popd

motifdir="notebooks/multiscale/motifs/data"
mkdir -p ${motifdir}
gdown --id 1SIRrG8KuobgjuByBHxRt11qkM_Fj7JSN -O ${motifdir}/multiscale_motif_intermediate_data.tgz \
&& pushd ${motifdir}/ \
&& tar -xzf multiscale_motif_intermediate_data.tgz \
&& popd

resourcedir="notebooks/multiscale/resource_statistics/data"
mkdir -p ${resourcedir}
gdown --id 1Roj4WFBofLsRQVY8FHTE_0fq9EJPKGRt -O ${resourcedir}/multiscale_resource_intermediate_data.tgz \
&& pushd ${resourcedir} \
&& tar -xzf multiscale_resource_intermediate_data.tgz \
&& popd
mkdir -p ${resourcedir}/smoothed_skels
gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O ${resourcedir}/smoothed_skels/smoothed_skeletons_v185.tgz \
&& pushd ${resourcedir}/smoothed_skels \
&& tar -xzf smoothed_skeletons_v185.tgz \
&& popd
