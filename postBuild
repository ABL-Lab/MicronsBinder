mkdir $HOME/.jupyter
echo "c.NotebookApp.iopub_data_rate_limit=1e22" >> $HOME/.jupyter/jupyter_notebook_config.py
jupyter nbextension install --py --sys-prefix itkwidgets
jupyter nbextension enable --py --sys-prefix itkwidgets
cd /tmp/
jupyter labextension install @jupyter-widgets/jupyterlab-manager --no-build
jupyter labextension install jupyter-matplotlib jupyterlab-datawidgets jupyter-webrtc itkwidgets --no-build
jupyter labextension install jupyterlab-dash --no-build
jupyter lab build --minimize=False  # minimize uses too much memory
cd $HOME

funcdir="notebooks/multiscale/function/data"
mkdir -p ${funcdir}
cd ${funcdir} \
&& gdown --id 1S2qE6-oNP_KMvkobRxswkH0DqCJDbPnu -O calcium_trace.tgz \
&& tar -xzf calcium_trace.tgz \
&& gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O smoothed_skeletons_v185.tgz \
&& tar -xzf smoothed_skeletons_v185.tgz
cd $HOME

mitodir="notebooks/multiscale/mitochondria/data"
mkdir -p ${mitodir}
cd ${mitodir} \
&& gdown --id 1OIUpHr9gVYKVagDqpom9Sx9qb5iAX5Km -O multiscale_mito_intermediate_data.tgz \
&& tar -xzf multiscale_mito_intermediate_data.tgz \
&& gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O smoothed_skeletons_v185.tgz \
&& tar -xzf smoothed_skeletons_v185.tgz
cd $HOME

motifdir="notebooks/multiscale/motifs/data"
mkdir -p ${motifdir}
cd ${motifdir} \
&& gdown --id 1SIRrG8KuobgjuByBHxRt11qkM_Fj7JSN -O multiscale_motif_intermediate_data.tgz \
&& tar -xzf multiscale_motif_intermediate_data.tgz
cd $HOME

resourcedir="notebooks/multiscale/resource_statistics/data"
mkdir -p ${resourcedir}
cd ${resourcedir} \
&& gdown --id 1Roj4WFBofLsRQVY8FHTE_0fq9EJPKGRt -O multiscale_resource_intermediate_data.tgz \
&& tar -xzf multiscale_resource_intermediate_data.tgz \
&& mkdir -p smoothed_skels \
&& cd smoothed_skels \
&& gdown --id 1Tpa-p7rwOZ65rIwDPbm4famUFtqhbqOK -O smoothed_skeletons_v185.tgz \
&& tar -xzf smoothed_skeletons_v185.tgz
cd $HOME
